# Changelog

## [1.2.0] - 2025-07-04

### 新增
- 支援計算抵押品餘額並整合至總資產統計
- 新增重平衡參數設定，可調整目標比例與觸發閾值
- CLI 與 run.py 提供重平衡開關與模擬測試介面

### 修復
- 修正科學記號價格步長計算
- 修正重平邏輯與資產比例設定，移除歷史交易資料獲取
- 修正價格取得與 WebSocket 斷線異常

### 優化
- 更新依賴版本並改善日誌輸出格式


## [1.1.2] - 2025-04-10

### 新增

- 添加 WebSocket 代理連接支持，允許通過代理服務器連接

### 優化

- 自動終止程序功能：當 API 簽名創建失敗時立即停止運行，防止無效操作


## [1.1.1] - 2025-04-09

### 新增

- 徹底改進重平衡機制風險評估方法，基於總資產價值而非累計交易量
- 添加動態風險暴露度計算，對實際風險提供更精確的評估
- 為重平衡決策添加詳細日誌，包括淨部位價值和風險暴露比例

### 優化

- 完善重平衡系統的錯誤處理，確保網絡或API問題時仍能正常運作
- 為風險判斷增加備用機制，在資產數據無法獲取時回退至舊方法

### 安全

- 改進風險評估算法，防止在大量交易累積後風險被系統性低估

## [1.1.0] - 2025-04-09

### 新增

- 為 WebSocket 客戶端添加專門的日誌標識，使日誌更易識別
- 在心跳檢測失敗時添加更詳細的日誌記錄

### 修改

- 將 WebSocket 相關的日誌改名為 `backpack_ws`，使日誌更具描述性

### 修復

- 徹底重構 WebSocket 斷線重連機制，解決連接無法完全重置的問題
- 修復 WebSocket 斷線後資源未完全釋放的問題
- 改進 `on_close` 處理邏輯，使用獨立線程進行重連以避免阻塞回調
- 優化連接關閉邏輯，確保所有相關資源和線程都被正確清理
- 增強 WebSocket 心跳檢測機制，更快偵測並恢復中斷的連接

## [1.0.0] - 2025-04-08

### 新增

- 實現基礎做市策略與 WebSocket 即時數據連接
- 建立命令列介面與互動式面板
- 完成設定檔管理及資料庫支援
- 實現日誌系統並提供完整 README 說明
